#!/bin/bash

echo "üöÄ Setting up Supabase PostgreSQL for WisdomOS"
echo ""
echo "üìã Follow these steps:"
echo ""
echo "1Ô∏è‚É£  Create a Supabase Account (if you don't have one):"
echo "    ‚Üí Go to https://supabase.com"
echo "    ‚Üí Sign up with GitHub or Email"
echo ""
echo "2Ô∏è‚É£  Create a New Project:"
echo "    ‚Üí Click 'New Project'"
echo "    ‚Üí Project name: wisdomos-database"
echo "    ‚Üí Database Password: [Generate a strong password - SAVE THIS!]"
echo "    ‚Üí Region: Choose closest to you"
echo "    ‚Üí Click 'Create new project'"
echo "    ‚Üí Wait 1-2 minutes for setup"
echo ""
echo "3Ô∏è‚É£  Get Your Database Connection String:"
echo "    ‚Üí Go to Settings (gear icon)"
echo "    ‚Üí Click on 'Database' in the sidebar"
echo "    ‚Üí Scroll to 'Connection string'"
echo "    ‚Üí Click on 'URI' tab"
echo "    ‚Üí Copy the connection string"
echo ""
echo "4Ô∏è‚É£  Add to Vercel Environment Variables:"
echo ""
echo "    Run this command with your connection string:"
echo "    vercel env rm DATABASE_URL production"
echo "    echo 'YOUR_CONNECTION_STRING' | vercel env add DATABASE_URL production"
echo ""
echo "5Ô∏è‚É£  Switch to PostgreSQL Schema:"
cp prisma/schema.postgresql.prisma prisma/schema.prisma
echo "    ‚úÖ Switched to PostgreSQL schema"
echo ""
echo "6Ô∏è‚É£  Initialize Database (after adding DATABASE_URL to Vercel):"
echo "    export DATABASE_URL='YOUR_CONNECTION_STRING'"
echo "    npx prisma db push"
echo "    npx prisma db seed"
echo ""
echo "7Ô∏è‚É£  Redeploy to Vercel:"
echo "    vercel --prod --yes"
echo ""
echo "üìù Example connection string format:"
echo "postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres"
echo ""
echo "üéâ Your app will be fully functional at:"
echo "https://wisdomos-web.vercel.app"